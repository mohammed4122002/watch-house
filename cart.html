<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>سلة التسوق - جوزال</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
</head>
<body>
   <header class="">
        <div class="top container">
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Select Country 🌍
                </a>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <li><a class="dropdown-item" href="#">Palestine</a></li>
                    <li><a class="dropdown-item" href="#">Jordan</a></li>
                    <li><a class="dropdown-item" href="#">Egypt</a></li>
                    <li><a class="dropdown-item" href="#">Lebanon</a></li>
                    <li><a class="dropdown-item" href="#">Syria</a></li>
                </ul>
            </div>
            <div>
                <div class="input-group">
                    <button class="search">
                        <img src="./image/search.svg" alt="">
                    </button>
                    <input type="text" class="form-control" aria-label="Text input with segmented dropdown button"
                        placeholder="Search for watches...">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <span class="visually-hidden">Toggle Dropdown</span>
                    </button>
                    <button type="button" class="btn btn-outline-secondary">All Watches</button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#">All Watches</a></li>
                        <li><a class="dropdown-item" href="#">Smart Watches</a></li>
                        <li><a class="dropdown-item" href="#">Analog Watches</a></li>
                        <li><a class="dropdown-item" href="#">Digital Watches</a></li>
                    </ul>
                </div>
            </div>
            <div class="logo">
                <img src="./image/logo.png" alt="">
            </div>
        </div>
        <div class="border"></div>
        <div class="down container">
            <div class="auth">
              
            </div>
            <nav>
                <ul class="nav ">
                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="#">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="#">Blog</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Accessories</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Home</a>
                    </li>
                </ul>
            </nav>
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <span style="font-size:1.3em; margin-left:8px;">&#9776;</span> Browse Categories
                </a>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <li><a class="dropdown-item" href="#">smart</a></li>
                    <li><a class="dropdown-item" href="#">analog</a></li>
                    <li><a class="dropdown-item" href="#">digital</a></li>
                    <li><a class="dropdown-item" href="#">accessories</a></li>
                </ul>
            </div>
        </div>
        <div class="border"></div>
    </header>

  <main class="container cart-page" >
    <h2 class="cart-title" dir="rtl">سلة التسوق <span>🛒</span></h2>
    <div id="cartContainer" class="cart-list"></div>
    <div class="cart-footer" dir="rtl">
      <div class="cart-total-label">المجموع: <span id="cartTotal" class="cart-total-value">$ 0</span></div>
      <div class="d-flex gap-2">
        <button class="btn btn-outline-danger" id="clearCartBtn">تفريغ السلة</button>
        <button class="checkout-btn" id="checkoutBtn">متابعة للدفع</button>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid" dir="rtl">
      <div class="footer-brand">
        <h3 class="brand-name">Jozal</h3>
        <p class="brand-desc">ساعات جوزال تجمع بين الأناقة والدقة في التصميم.</p>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
  <script src="auth.js"></script>
  <script>
    // منع الوصول دون تسجيل دخول
    if (!checkAuth()) {
      // سيتم إعادة التوجيه داخل checkAuth
    }

    updateUI();

    function readCart() {
      return JSON.parse(localStorage.getItem('cart')) || [];
    }

    function writeCart(cart) {
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    function formatPrice(value) {
      return `$ ${Number(value).toFixed(2)}`;
    }

    function renderCart() {
      const container = document.getElementById('cartContainer');
      const totalElement = document.getElementById('cartTotal');
      const cart = readCart();

      container.innerHTML = '';

      if (cart.length === 0) {
        container.innerHTML = '<div class="alert alert-info">السلة فارغة حالياً.</div>';
        totalElement.textContent = '$ 0.00';
        return;
      }

      let total = 0;
      cart.forEach((item, index) => {
        const itemTotal = (item.price || 0) * (item.quantity || 1);
        total += itemTotal;

        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <button class="remove-btn" data-index="${index}">حذف</button>
          <div class="item-info">
            <div class="item-name">${item.name}</div>
            <div class="text-muted">${formatPrice(item.price)} × ${item.quantity || 1}</div>
            <div class="item-price">${formatPrice(itemTotal)}</div>
          </div>
          <div class="item-image">
            <img src="./image/Mask Group 22.png" alt="watch" />
          </div>
        `;
        container.appendChild(row);
      });

      totalElement.textContent = formatPrice(total);
    }

    function removeFromCart(index) {
      const cart = readCart();
      cart.splice(index, 1);
      writeCart(cart);
      renderCart();
    }

    document.getElementById('cartContainer').addEventListener('click', (e) => {
      if (e.target.matches('button[data-index]')) {
        const index = Number(e.target.getAttribute('data-index'));
        removeFromCart(index);
      }
    });

    document.getElementById('clearCartBtn').addEventListener('click', () => {
      writeCart([]);
      renderCart();
    });

    document.getElementById('checkoutBtn').addEventListener('click', () => {
      window.location.href = 'checkout.html';
    });

    renderCart();
  </script>
</body>
</html>


